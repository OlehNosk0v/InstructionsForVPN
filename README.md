# InstructionsForVPN

Эта инструкция как установить клиент VPN на ваше устройство. Здесь будут две программы:

* [Установка](#Установка)
    * [На Windows и Linux](#WindowsAndLinux)
      * [V2rayN](#V2rayN)
        * [Как добавить ключ](#Как-добавить-ключ)
        * [Настройки маршутизации](#Настройки-маршутизации-V2rayN)
      * [AmneziaVPN (Не рекомендуется)](#AmneziaVPN-PC)
    * [На Android](#Android)
      * [V2rayNG](#V2rayNG)
        * [(Опционально) Установка программы для автообновления и упрощения установки](#Опционально-Установка-программы-для-автообновления-и-упрощения-установки)
      * [AmneziaVPN (Не рекомендуется)](#AmneziaVPN-Mobile)
* [Настройки маршутизации](#Настройки-маршутизации)

# Установка

## WindowsAndLinux 

### V2rayN

Скачайте [V2rayN](https://github.com/2dust/v2rayN) на ПК

| ![Win1](https://github.com/OlehNosk0v/InstructionsForVPN/blob/main/material/Win1.png)   | ![Win2](https://github.com/OlehNosk0v/InstructionsForVPN/blob/main/material/Win2.png)   |
| --------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------- |
| Справа найдите вкладку "Release" и нажмите на последнюю версию                          | Выберите программу под вашу ОС                                                          |

Распокуйте и запустите программу.
<br>

![Win3_reboot](https://github.com/OlehNosk0v/InstructionsForVPN/blob/8f0c96b5f4dca55f2bfc740e72bfee2905f92437/material/Win3_reboot.png)

Главное окно.

**1 - Область**, которая занимает пол экрана, это журнал ошибок и соединений. Если у вас возникла ошибка или проблема, то можно посмотреть туда и выяснить, какая именно ошибка вышла и как её починить. Если вы пишите администратору с проблемой, то прикладывайте скриншот этой области.
<br>
**2 - Режим VPN** - Ползунок, который включает и выключает режим VPN. Требует права администратора/суперпользователя, так как он должен иметь право перебрасывать весь трафик интернета через VPN.
<br>
**3 - Вкладка с Proxy** - есть три режима: "Очистить системный прокси", "Установить системный прокси" и "Не менять системный прокси".
<br>
![ProxySettings](https://github.com/OlehNosk0v/InstructionsForVPN/blob/33e7b9aafa7b5b20d08c9605a4d281e293d68a73/material/ProxySettings.png)
<br>
* *"Очистить системный прокси"* - Программа очищает настройки прокси на вашем устройстве, чтобы не было конфликтов с другими VPN программами.
* *"Установить системный прокси"* - Программа ставит свой системный прокси, чтобы программы, которые используют его, могли отправлять трафик через VPN. (Удобно, когда хочется использовать VPN только на браузер и Discord).
* *"Не менять системный прокси"* - Ничего не меняет с ним.
<br>

**4 - Список маршутизации** - Показывает список возможных правил маршутизации (см. [Маршутизация](#Настройки-маршутизации) ).
<br>
**5 - Серверы** - Вкладка, позволяющее выбрать способ добавления VPN ключа.
<br>
**6 - Настройки** - Вкладка с настройками, где можно изменить всё, что нужно.
<br>
**7 - Проверить обновление** - Вкладка, где вы можете обновить саму программу. 
<br>
![UpdateSettings](https://github.com/OlehNosk0v/InstructionsForVPN/blob/33e7b9aafa7b5b20d08c9605a4d281e293d68a73/material/UpdateSettings.png)
<br>

#### Как добавить ключ

![Win3](https://github.com/OlehNosk0v/InstructionsForVPN/blob/main/material/Win3.png)

Чтобы добавить ключ, просто скопируйте его и вставьте в программу через клавишу *Ctrl+V* или "Серверы" -> "Импорт массива URL из буфера обмена".

Чтобы добавить [правила маршутизации](#Настройки-маршутизации), нажмите сверху на "Настройки" -> "Настройки маршутизации" -> "Добавить" -> "Импорт правил из буфера обмена".
Теперь в примичании назовате так, как вам удобно. В списке правил маршутизации найдите созданный вами и правой кнопкой мыши кликните на него и установите как активное правило.

Готово!

Чтобы включить VPN, слево снизу нажмите на ползунок "Режим VPN", также аналогично и для выключения.


#### Настройки маршутизации V2rayN

Если вы хотите создать **НОВЫЙ список правил**, нужно зайти в настройки и выбрать вкладку "Настройки маршутизации"
<br>
<br>
![PathSettings](https://github.com/OlehNosk0v/InstructionsForVPN/blob/a5d827798f2db9ae9e0b4bc62aa0d2398284bdde/material/PathToSettingsRule.png)
<br>
<br>
В появившийся окошке нажмите кнопку "Добавить"
<br>
<br>
![AddRule](https://github.com/OlehNosk0v/InstructionsForVPN/blob/a5d827798f2db9ae9e0b4bc62aa0d2398284bdde/material/AddRule.png)
<br>
<br>
Если вы хотите **ИЗМЕНИТЬ существующий список правил**, то кликните два раза на нужный список правил.

Для начало придумайте название вашего списка правил, введя в "Примечание".
<br>
<br>
![NameRule](https://github.com/OlehNosk0v/InstructionsForVPN/blob/a5d827798f2db9ae9e0b4bc62aa0d2398284bdde/material/NameRule.png)
<br>
<br>
Теперь вы можете создавать правила маршутизации. Чтобы добавить новое правило, нажмите на кнопку "Добавить правило".

На первый взгляд ничего не понятно:
<br>
<br>
![Veselie](https://github.com/OlehNosk0v/InstructionsForVPN/blob/a5d827798f2db9ae9e0b4bc62aa0d2398284bdde/material/DomainAndIPSettings.png)
<br>
<br>
Но я постараюсь вам объяснить, как ту что настраивается.
Первым делом обратим внимания на *outboundTag*, где мы можем ввести три значения:
<br>
<br>
![ProxyDirectBlock](https://github.com/OlehNosk0v/InstructionsForVPN/blob/a5d827798f2db9ae9e0b4bc62aa0d2398284bdde/material/ProxyDirectBlock.png)
<br>
<br>
* **proxy** - значение, которое указывает программе, что все домены и IP в этом правиле должны транслироваться строго через VPN.
* **direct** - значение, которое укзаывает программе, что все домены и IP в этом правиле не должны транслироваться через VPN, а должны идти напрямую.
* **block** - значение, которое указывает программе, что все домены и IP в этом правиле блокируются, то есть не имеют доступа к интернету любым образом. Удобно, когда нужно заблокировать кучу рекламы.

Теперь рассмотрим ниже:
* *Домен* - это поле ввода доменов, к которым мы должны применить правило. 
Туда записываются список доменов через Enter. Если вы введёте домен "example.com", то правила будут приминятся также и на все поддомены (пример: "www.example.com", "n2.example.com" и т.д.)
Чтобы правило работало только на домен "example.com" без поддоменов, то нужно использовать параметр "full:". Выглядеть будет это так: "full:example.com".
Также в список доменов можно внести и правло, что все '.ru' адреса должны транслироваться. Это можно сделать через настройку `regexp:.*\.ru$`.
* *IP-адреса или сеть CIDR* - это поле ввода адресов, к которым мы должны применять правило.
В нашем случаи мы используем `geoip:ru`. Это заранее заготовленный список адресов, которые находятся в России. По умолчанию в существующих правилах есть правило с *direct* значением и адресом `geoip:private`. Это означает, что все IP адреса в локальной сети должны транслироваться напрямую, а не через VPN.
* *Полное имя процесса (Режим TUN)* - это поле ввода процессов, программ и демонов, к которым мы должны применять правило.
Оно работает только в случаи включённого режим VPN. Вводится программа так: "example.exe". Это удобно, когда нужно исключить программу из работы VPN. *direct* и ввести "example.com".

Заранее подготовленный [список маршутизации есть в самом внизу](#Настройки-маршутизации). Вы можете вставить его, скопировав и нажав на "Импорт правил из файла", когда пытаетесь создать новый список правил.

  
### AmneziaVPN PC

**Почему не рекомендуется**
*AmneziaVPN не имеет обширного функционала и технологий VLESS. В данный момент это не критично и им можно пользоваться, однако в будущем при обновление ключей и технологий AmneziaVPN может стать несовместимым. Также у него отстуствует адекватная маршутизация, из-за чего весь трафик идёт через VPN, а не раздельно как у других*

Скачайте [AmneziaVPN](https://github.com/amnezia-vpn/amnezia-client) на ПК

| ![Win1](https://github.com/OlehNosk0v/InstructionsForVPN/blob/main/material/Win1.png)   | ![Win4](https://github.com/OlehNosk0v/InstructionsForVPN/blob/main/material/Win4.png)   |
| --------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------- |
| Справа найдите вкладку "Release" и нажмите на последнюю версию                          | Выберите программу под вашу ОС                                                          |

Дальше

## Android

### V2rayNG

Если вы желаете сами установить и настроить своими ручками, то вот программа: 
https://github.com/2dust/v2rayNG

| ![v2rayNG1](https://github.com/OlehNosk0v/InstructionsForVPN/blob/main/material/V2rayNG1.png) | ![v2rayNG2](https://github.com/OlehNosk0v/InstructionsForVPN/blob/main/material/V2rayNG2.png) |
| --------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------- |
| Найите вкладку "Release" справа или внизу и нажмте на последнюю версию                        | Скачайте программу, где имеется название "arm64" или "universal"                              |

#### (Опционально) Установка программы для автообновления и упрощения установки
Скачайте [Obtainium](https://github.com/ImranR98/Obtainium) - это менеджер программ для автообновления и удобства скачивания из разных источников.
[Лист APK файлов](https://github.com/ImranR98/Obtainium/releases) - выбирайте `app-arm64-v8a-release.apk` и устанавливайте на устройство.
<br>
![4](https://github.com/OlehNosk0v/InstructionsForVPN/blob/main/material/4.png)
<br>

Дальше уже заходим в саму программу:

| ![1](https://github.com/OlehNosk0v/InstructionsForVPN/blob/main/material/1.jpg)   | ![2](https://github.com/OlehNosk0v/InstructionsForVPN/blob/main/material/2.jpg)                                                               | ![3](https://github.com/OlehNosk0v/InstructionsForVPN/blob/main/material/3.jpg)   |
| --------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------- |
| 1. При установке Obtainium нажмите снизу на кнопку "Добавить"                     | 2. Скопируйте ссылку:<br>https://github.com/2dust/v2rayNG<br>и вставьте в поле URL-адреса.<br>3. Нажмите на "добавить" и подождите пару минут | 4. Когда покажется экран программы, нажмите снизу на "Установить"                 |

Поздравляю, вы скачали программу. Теперь время настраивать его.

#### Настройка VPN:

| ![5](https://github.com/OlehNosk0v/InstructionsForVPN/blob/main/material/5.jpg)  | ![6](https://github.com/OlehNosk0v/InstructionsForVPN/blob/main/material/6.jpg)   |
| -------------------------------------------------------------------------------- | --------------------------------------------------------------------------------- |
| Зайдя в программу, нажмите на "+" сверху справа, чтобы добавить профиль VPN      | Скопируйте ключ, который был вам отправлен, и нажмите на "Импорт из буфер обмена" |

Вы можете теперь пользоваться VPN, однако также следует настроить маршутизацию, чтобы повысить шансы подозрение провайдера на использование VPN:

| ![7](https://github.com/OlehNosk0v/InstructionsForVPN/blob/main/material/7.jpg)  | ![8](https://github.com/OlehNosk0v/InstructionsForVPN/blob/main/material/8.jpg)   | ![9](https://github.com/OlehNosk0v/InstructionsForVPN/blob/main/material/9.jpg)   | ![10](https://github.com/OlehNosk0v/InstructionsForVPN/blob/main/material/10.jpg)                  |
| -------------------------------------------------------------------------------- | --------------------------------------------------------------------------------- | --------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------ |
| Нажмите слево сверху на меню                                                    | Выберите вкладку "Маршутизация"                                                    | Нажмите на "+" сверху справа                                                      | Скопируйте [настройки мрашутизации](#Настройки-маршутизации) и нажмите на "Импорт правил из буфера обмена" |


# Настройки маршутизации

```json
[
  {
    "outboundTag": "direct",
    "domain": [
      "wplace.live"
    ],
    "enabled": true,
    "remarks": "Wplace"
  },
  {
    "outboundTag": "direct",
    "domain": [
      "twitch.tv",
      "jtvnw.net",
      "twitchcdn.net",
      "cloudfront.net",
      "ttvnw.net",
      "live-video.net",
      "twitchcdn.net",
      "ext-twitch.tv",
      "twitch-shadow.net",
      "twitch.a2z.com",
      "twitchcdn-shadow.net",
      "twitchsvc-staging.tech",
      "twitchsvc.net"
    ],
    "enabled": true,
    "remarks": "Twitch"
  },
  {
    "outboundTag": "direct",
    "domain": [
      "vk.com",
      "userapi.com"
    ],
    "enabled": true,
    "remarks": "VK"
  },
  {
    "outboundTag": "direct",
    "domain": [
      "regexp:.*\\.ru$"
    ],
    "enabled": true,
    "remarks": "\u0414\u043E\u043C\u0435\u043D\u044B \u0441 .ru \u0441\u0430\u0439\u0442\u044B \u043D\u0430\u043F\u0440\u044F\u043C\u0443\u044E"
  },
  {
    "outboundTag": "direct",
    "ip": [
      "geoip:ru"
    ],
    "enabled": true,
    "remarks": "\u0412\u0441\u0435 \u0420\u0423 IP \u0430\u0434\u0440\u0435\u0441\u0430 \u043D\u0430\u043F\u0440\u044F\u043C\u0443\u044E"
  },
  {
    "outboundTag": "direct",
    "ip": [
      "geoip:private"
    ],
    "enabled": true,
    "remarks": "\u041F\u0440\u0438\u0432\u0430\u0442\u043D\u044B\u0435 \u0441\u0435\u0442\u0438 \u043D\u0430\u043F\u0440\u044F\u043C\u0443\u044E"
  },
  {
    "outboundTag": "direct",
    "domain": [
      "geosite:private"
    ],
    "enabled": true,
    "remarks": "\u041F\u0440\u0438\u0432\u0430\u0442\u043D\u044B\u0435 \u0434\u043E\u043C\u0435\u043D\u044B \u043D\u0430\u043F\u0440\u044F\u043C\u0443\u044E"
  },
  {
    "port": "0-65535",
    "outboundTag": "proxy",
    "enabled": true,
    "remarks": "\u041E\u0441\u0442\u0430\u043B\u044C\u043D\u043E\u0435 \u0432 \u043F\u0440\u043E\u043A\u0441\u0438"
  }
]
```
